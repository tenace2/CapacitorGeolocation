import{Q as A,a as w,b as q}from"./QPage.8b021b5f.js";import{c as F,d as V,Q as P,a as h,b as c}from"./QChip.2c301cd5.js";import{h as x,f as _,Q as $}from"./QBtn.f4923e8f.js";import{c as H,a as L,h as Q,g as R,r as p,G as g,I as y,J as e,R as i,K as a,N as d,V as B,M as n,L as C}from"./index.a14a9651.js";import{u as T,a as j}from"./use-dark.1822dcc9.js";import{G as k}from"./index.c473e357.js";import{_ as J,C as S}from"./plugin-vue_export-helper.f9bfd808.js";var K=H({name:"QBanner",props:{...T,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(m,{slots:s}){const{proxy:{$q:v}}=R(),o=j(m,v),u=L(()=>"q-banner row items-center"+(m.dense===!0?" q-banner--dense":"")+(o.value===!0?" q-banner--dark q-dark":"")+(m.rounded===!0?" rounded-borders":"")),r=L(()=>`q-banner__actions row items-center justify-end col-${m.inlineActions===!0?"auto":"all"}`);return()=>{const f=[Q("div",{class:"q-banner__avatar col-auto row items-center self-start"},x(s.avatar)),Q("div",{class:"q-banner__content col text-body2"},x(s.default))],b=x(s.action);return b!==void 0&&f.push(Q("div",{class:r.value},b)),Q("div",{class:u.value+(m.inlineActions===!1&&b!==void 0?" q-banner--top-padding":""),role:"alert"},f)}}});const M={class:"q-gutter-md"},U={class:"q-gutter-sm"},Y={__name:"CapacitorGeoLocate",setup(m){const s=p(null),v=p(null),o=p(null),u=p(!1),r=p(null),f=p(!1),b=async()=>{try{const l=await k.checkPermissions();r.value=l.location}catch(l){o.value="Failed to check permissions: "+l.message}},D=async()=>{try{const l=await k.requestPermissions();r.value=l.location}catch(l){o.value="Failed to request permissions: "+l.message}},I=async()=>{o.value=null,f.value=!0;try{const l=await k.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});s.value={latitude:l.coords.latitude,longitude:l.coords.longitude,accuracy:l.coords.accuracy,timestamp:new Date(l.timestamp).toLocaleString()}}catch(l){o.value="Failed to get location: "+l.message}finally{f.value=!1}},G=async()=>{if(!u.value){o.value=null,u.value=!0;try{v.value=await k.watchPosition({enableHighAccuracy:!0,timeout:1e4},(l,t)=>{if(t){o.value="Watch error: "+t.message;return}s.value={latitude:l.coords.latitude,longitude:l.coords.longitude,accuracy:l.coords.accuracy,timestamp:new Date(l.timestamp).toLocaleString()}})}catch(l){o.value="Failed to start watching: "+l.message,u.value=!1}}},N=async()=>{if(!(!u.value||!v.value))try{await k.clearWatch({id:v.value}),v.value=null,u.value=!1}catch(l){o.value="Failed to stop watching: "+l.message}};return b(),(l,t)=>(g(),y(A,{class:"q-pa-md"},{default:e(()=>[i("div",M,[t[11]||(t[11]=i("h4",null,"Capacitor Geolocation Demo",-1)),a(q,{class:"q-mb-md"},{default:e(()=>[a(w,null,{default:e(()=>[t[2]||(t[2]=i("div",{class:"text-h6"},"Platform Information",-1)),i("p",null,"Platform: "+d(B(S).getPlatform()),1),i("p",null," Native Platform: "+d(B(S).isNativePlatform()?"Yes":"No"),1)]),_:1,__:[2]})]),_:1}),a(q,{class:"q-mb-md"},{default:e(()=>[a(w,null,{default:e(()=>[t[4]||(t[4]=i("div",{class:"text-h6"},"Permission Status",-1)),i("p",null,[t[3]||(t[3]=n(" Location Permission: ")),a(F,{color:r.value==="granted"?"positive":r.value==="denied"?"negative":"warning","text-color":"white"},{default:e(()=>[n(d(r.value||"Unknown"),1)]),_:1},8,["color"])]),r.value!=="granted"?(g(),y(_,{key:0,color:"primary",label:"Request Permissions",onClick:D})):C("",!0)]),_:1,__:[4]})]),_:1}),a(q,{class:"q-mb-md"},{default:e(()=>[a(w,null,{default:e(()=>[t[5]||(t[5]=i("div",{class:"text-h6"},"Location Controls",-1)),i("div",U,[a(_,{color:"primary",label:"Get Current Position",onClick:I,loading:f.value,disable:r.value!=="granted"},null,8,["loading","disable"]),u.value?C("",!0):(g(),y(_,{key:0,color:"secondary",label:"Start Watching",onClick:G,disable:r.value!=="granted"},null,8,["disable"])),u.value?(g(),y(_,{key:1,color:"negative",label:"Stop Watching",onClick:N})):C("",!0)])]),_:1,__:[5]})]),_:1}),s.value?(g(),y(q,{key:0,class:"q-mb-md"},{default:e(()=>[a(w,null,{default:e(()=>[t[10]||(t[10]=i("div",{class:"text-h6"},"Location Data",-1)),a(V,null,{default:e(()=>[a(P,null,{default:e(()=>[a(h,null,{default:e(()=>[a(c,null,{default:e(()=>t[6]||(t[6]=[n("Latitude")])),_:1,__:[6]}),a(c,{caption:""},{default:e(()=>[n(d(s.value.latitude),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:e(()=>[a(h,null,{default:e(()=>[a(c,null,{default:e(()=>t[7]||(t[7]=[n("Longitude")])),_:1,__:[7]}),a(c,{caption:""},{default:e(()=>[n(d(s.value.longitude),1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:e(()=>[a(h,null,{default:e(()=>[a(c,null,{default:e(()=>t[8]||(t[8]=[n("Accuracy")])),_:1,__:[8]}),a(c,{caption:""},{default:e(()=>[n(d(s.value.accuracy)+" meters",1)]),_:1})]),_:1})]),_:1}),a(P,null,{default:e(()=>[a(h,null,{default:e(()=>[a(c,null,{default:e(()=>t[9]||(t[9]=[n("Timestamp")])),_:1,__:[9]}),a(c,{caption:""},{default:e(()=>[n(d(s.value.timestamp),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[10]})]),_:1})):C("",!0),o.value?(g(),y(K,{key:1,class:"text-white bg-negative"},{avatar:e(()=>[a($,{name:"error",color:"white"})]),action:e(()=>[a(_,{flat:"",color:"white",label:"Dismiss",onClick:t[0]||(t[0]=W=>o.value=null)})]),default:e(()=>[n(" "+d(o.value)+" ",1)]),_:1})):C("",!0),a(_,{color:"primary",label:"Back to Home",onClick:t[1]||(t[1]=W=>l.$router.push("/")),flat:""})])]),_:1}))}};var te=J(Y,[["__scopeId","data-v-1ef254f5"]]);export{te as default};
