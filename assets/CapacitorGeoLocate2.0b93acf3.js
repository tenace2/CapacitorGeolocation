import{r as a,E as W,G as y,O as w,R as o,N as i,M as l,L as x,Y as H,B as m,Z as q,$ as g}from"./index.a14a9651.js";import{G as f}from"./index.c473e357.js";import{_ as R,C as E}from"./plugin-vue_export-helper.f9bfd808.js";const D={class:"geolocation-demo"},K={class:"feature-section"},T={class:"feature-card"},_={class:"result-box"},L={class:"feature-section"},B={class:"feature-card"},J={class:"result-box"},$={class:"feature-card"},Y={class:"result-box"},Z={key:0,class:"error-box request-error"},j={key:1,class:"explanation-box"},z={class:"feature-section"},F={class:"feature-card"},Q={class:"options-form"},X={class:"form-group"},ee={class:"form-group"},oe={class:"form-group"},te={class:"result-box"},se={class:"feature-section"},ne={class:"feature-card"},ie={class:"options-form"},ae={class:"form-group"},le={class:"form-group"},re={class:"form-group"},ue={class:"form-group"},de=["disabled"],ce=["disabled"],me={class:"result-box"},pe={key:0,class:"error-section"},ve={class:"error-box"},ge={__name:"CapacitorGeoLocate2",setup(fe){const C=a(""),P=a(""),k=a(""),p=a(null),b=a(""),u=W({enableHighAccuracy:!1,timeout:1e4,maximumAge:0}),v=a(""),r=W({enableHighAccuracy:!1,timeout:1e4,maximumAge:0,minimumUpdateInterval:5e3}),d=a(!1),c=a(""),N=a(0),n=a(null),U=()=>{const t=E.isNativePlatform(),e=E.getPlatform(),s={isNativePlatform:t,platform:e,description:t?`Running on native ${e} platform`:"Running as a web application"};C.value=JSON.stringify(s,null,2),console.log("Platform check:",s)},A=t=>{if(!t)return"No position data available";const{coords:e,timestamp:s}=t;return JSON.stringify({timestamp:s,coords:{latitude:e.latitude,longitude:e.longitude,accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,speed:e.speed}},null,2)},G=async()=>{try{n.value=null,console.log("Checking permissions...");const t=await f.checkPermissions();console.log("Permissions status:",t),P.value=JSON.stringify(t,null,2)}catch(t){console.error("Error checking permissions:",t),n.value={code:t.code||"UNKNOWN",message:t.message||"An unknown error occurred"},P.value="Error checking permissions"}},O=async()=>{try{n.value=null,p.value=null,console.log("Requesting permissions...");const t=await f.requestPermissions({permissions:["location"]});console.log("Permissions request result:",t),k.value=JSON.stringify(t,null,2)}catch(t){console.error("Error requesting permissions:",t),p.value={code:t.code||"UNKNOWN",message:t.message||"An unknown error occurred"},k.value="Error requesting permissions"}},S=async()=>{try{n.value=null,b.value="Loading...",console.log("Getting current position with options:",u);const t=await f.getCurrentPosition(u);console.log("Current position result:",t),b.value=A(t)}catch(t){console.error("Error getting current position:",t),n.value={code:t.code||"UNKNOWN",message:t.message||"An unknown error occurred"},b.value="Error getting current position"}},I=async()=>{try{if(n.value=null,d.value)return;v.value="Waiting for position updates...",N.value=0,console.log("Starting position watch with options:",r),c.value=await f.watchPosition(r,(t,e)=>{if(e){console.error("Error in watch callback:",e),n.value={code:e.code||"UNKNOWN",message:e.message||"An unknown error occurred during watch"};return}console.log("Watch update received:",t),N.value++,v.value=A(t)}),console.log("Watch started with ID:",c.value),d.value=!0}catch(t){console.error("Error starting position watch:",t),n.value={code:t.code||"UNKNOWN",message:t.message||"An unknown error occurred"},v.value="Error starting position watch",d.value=!1}},M=async()=>{try{if(n.value=null,!d.value||!c.value)return;console.log("Stopping watch with ID:",c.value),await f.clearWatch({id:c.value}),console.log("Watch stopped successfully"),d.value=!1,c.value="",v.value+=`

Watch stopped.`}catch(t){console.error("Error stopping watch:",t),n.value={code:t.code||"UNKNOWN",message:t.message||"An unknown error occurred"}}},h=a(!1);function V(){h.value=!h.value}return(t,e)=>(y(),w("div",D,[e[37]||(e[37]=o("h1",null,"@capacitor/geolocation Demo",-1)),o("div",K,[o("div",T,[e[7]||(e[7]=o("h3",null,"Platform Check",-1)),e[8]||(e[8]=o("p",null,"Check which platform the app is running on (Native or Web).",-1)),o("button",{onClick:U},"Check Platform"),o("div",_,[o("pre",null,i(C.value),1)])])]),o("div",L,[e[16]||(e[16]=o("h2",null,"Permissions",-1)),o("div",B,[e[9]||(e[9]=o("h3",null,"Check Permissions",-1)),e[10]||(e[10]=o("p",null,"Check current location permissions status on the device.",-1)),o("button",{onClick:G},"Check Permissions"),o("div",J,[o("pre",null,i(P.value),1)])]),o("div",$,[e[14]||(e[14]=o("h3",null,"Request Permissions",-1)),e[15]||(e[15]=o("p",null,"Request location permissions from the user. Not available on web.",-1)),o("button",{onClick:O},"Request Permissions"),o("button",{onClick:V,class:"explanation-btn"},i(h.value?"Hide Explanation":"Show Explanation"),1),o("div",Y,[o("pre",null,i(k.value),1)]),p.value?(y(),w("div",Z,[o("p",null,[e[11]||(e[11]=o("strong",null,"Code:",-1)),l(" "+i(p.value.code),1)]),o("p",null,[e[12]||(e[12]=o("strong",null,"Message:",-1)),l(" "+i(p.value.message),1)])])):x("",!0),h.value?(y(),w("div",j,e[13]||(e[13]=[H("<h4 data-v-9811209a>Platform Differences in Permission Handling</h4><strong data-v-9811209a>Android (and iOS):</strong><ul data-v-9811209a><li data-v-9811209a> On native platforms like Android, <code data-v-9811209a>Geolocation.requestPermissions()</code> is implemented and used to explicitly request location permissions from the user at runtime. </li><li data-v-9811209a> This method interacts with the native permission system to prompt the user for access, which is required by Android&#39;s security model. </li></ul><strong data-v-9811209a>Web:</strong><ul data-v-9811209a><li data-v-9811209a> On the web, <code data-v-9811209a>Geolocation.requestPermissions()</code> is <strong data-v-9811209a>not implemented</strong> in the Capacitor Geolocation plugin. </li><li data-v-9811209a> The official Capacitor documentation explicitly states: <br data-v-9811209a><em data-v-9811209a>&quot;Request location permissions. Will throw if system location services are disabled. Not available on web.&quot;</em></li><li data-v-9811209a> Instead, the browser&#39;s own Geolocation API manages permissions. When you call <code data-v-9811209a>getCurrentPosition()</code> or <code data-v-9811209a>watchPosition()</code>, the browser will automatically prompt the user for permission if needed, and there is no separate API to pre-request or check permissions in advance. </li></ul>",5)]))):x("",!0)])]),o("div",z,[e[25]||(e[25]=o("h2",null,"Get Current Position",-1)),o("div",F,[e[23]||(e[23]=o("h3",null,"Get Current Position",-1)),e[24]||(e[24]=o("p",null,"Get the current GPS location of the device.",-1)),o("div",Q,[o("div",X,[o("label",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>u.enableHighAccuracy=s)},null,512),[[q,u.enableHighAccuracy]]),e[17]||(e[17]=l(" Enable High Accuracy "))]),e[18]||(e[18]=o("p",{class:"option-description"}," Uses GPS if available (may consume more battery). ",-1))]),o("div",ee,[o("label",null,[e[19]||(e[19]=l("Timeout (ms): ")),m(o("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=s=>u.timeout=s),min:"0"},null,512),[[g,u.timeout,void 0,{number:!0}]])]),e[20]||(e[20]=o("p",{class:"option-description"}," Maximum wait time for location data. ",-1))]),o("div",oe,[o("label",null,[e[21]||(e[21]=l("Maximum Age (ms): ")),m(o("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>u.maximumAge=s),min:"0"},null,512),[[g,u.maximumAge,void 0,{number:!0}]])]),e[22]||(e[22]=o("p",{class:"option-description"}," Maximum age of cached position that is acceptable. ",-1))])]),o("button",{onClick:S},"Get Current Position"),o("div",te,[o("pre",null,i(b.value),1)])])]),o("div",se,[e[33]||(e[33]=o("h2",null,"Watch Position",-1)),o("div",ne,[e[31]||(e[31]=o("h3",null,"Watch Position",-1)),e[32]||(e[32]=o("p",null," Set up a watch for location changes. Note that watching for location can consume significant energy. ",-1)),o("div",ie,[o("div",ae,[o("label",null,[m(o("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>r.enableHighAccuracy=s)},null,512),[[q,r.enableHighAccuracy]]),e[26]||(e[26]=l(" Enable High Accuracy "))])]),o("div",le,[o("label",null,[e[27]||(e[27]=l("Timeout (ms): ")),m(o("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=s=>r.timeout=s),min:"0"},null,512),[[g,r.timeout,void 0,{number:!0}]])])]),o("div",re,[o("label",null,[e[28]||(e[28]=l("Maximum Age (ms): ")),m(o("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>r.maximumAge=s),min:"0"},null,512),[[g,r.maximumAge,void 0,{number:!0}]])])]),o("div",ue,[o("label",null,[e[29]||(e[29]=l("Minimum Update Interval (ms): ")),m(o("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=s=>r.minimumUpdateInterval=s),min:"0"},null,512),[[g,r.minimumUpdateInterval,void 0,{number:!0}]])]),e[30]||(e[30]=o("p",{class:"option-description"}," Android only: Minimum time between updates. ",-1))])]),o("button",{onClick:I,disabled:d.value}," Start Watching ",8,de),o("button",{onClick:M,disabled:!d.value}," Stop Watching ",8,ce),o("div",me,[o("p",null,"Watch ID: "+i(c.value||"Not watching"),1),o("p",null,"Updates received: "+i(N.value),1),o("pre",null,i(v.value),1)])])]),n.value?(y(),w("div",pe,[e[36]||(e[36]=o("h3",null,"General Error",-1)),o("div",ve,[o("p",null,[e[34]||(e[34]=o("strong",null,"Code:",-1)),l(" "+i(n.value.code),1)]),o("p",null,[e[35]||(e[35]=o("strong",null,"Message:",-1)),l(" "+i(n.value.message),1)])])])):x("",!0)]))}};var we=R(ge,[["__scopeId","data-v-9811209a"]]);export{we as default};
